flowchart TD
A[Начало] --> B[Получить запланированные тренировки]
B --> C[Получить выполненные упражнения]
C --> D{Есть ли тренировки и упражнения?}
D -->|Нет| E[Вернуть 0]
D -->|Да| F[Инициализировать счетчики]
F --> G[Отфильтровать тренировки с упражнением]
G --> H[Оставить тренировки до текущей даты]
H --> I[Для каждой тренировки]
I --> J[Найти упражнение в тренировке]
J --> K[Для каждого подхода]
K --> L[Добавить вес * повторы в totalScheduledWeight]
L --> M[Для каждого выполненного упражнения]
M --> N[Для каждого подхода]
N --> O[Добавить вес * повторы в totalCompletedWeight]
O --> P{totalScheduledWeight > 0?}
P -->|Нет| Q[Вернуть 0]
P -->|Да| R[Вычислить процент выполнения]
R --> S[Вернуть результат]

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style E fill:#f9f,stroke:#333,stroke-width:2px
    style S fill:#f9f,stroke:#333,stroke-width:2px
